
<!-- 
 TO DO LIST: 

 Manual entry of new users
 Manual Ban of users
 Manual Unban of users
 Manual deletion of users
 Set balance of Users
 Increase balance of Users
 Decrease balance of Users
 Remove all warnings of Users
 Manual Warning of Users
 Manual SQL Query
 Search for Users
 Search for Users by IP
 Change password of Users
 Change email of Users
-->


<!-- Path: admin.html -->
<html>
<head>
    <title>ADMIN</title>
    <link rel="stylesheet" href="admin.css" />
<body>
    <div id="title"><h1>ADMIN PANEL</h1></div>
    <div id="textarea-container">
        <div id="console-title"><a>Console Log:</a></div>
    <textarea id="command-log" readonly></textarea>
    </div>
    <select>
        <option value="search-user">Search User</option>
        <option value="new-user">New User</option>
        <option value="ban-user">Ban User</option>
        <option value="unban-user">Unban User</option>
        <option value="delete-user">Delete User</option>
        <option value="set-balance">Set Balance</option>
        <option value="increase-balance">Increase Balance</option>
        <option value="decrease-balance">Decrease Balance</option>
        <option value="remove-warnings">Remove Warnings</option>
        <option value="manual-warning">Manual Warning</option>
        <option value="manual-sql">Manual SQL</option>
        <option value="search-ip">Search IP</option>
        <option value="change-email">Change Email</option>
        <option value="change-password">Change Password</option>
    </select>

    

    <!-- 
    //base information needed to create an account
    constructor(ip,email,password,firstName,lastName,tier){
        this.UID = ""
        this.#ip = ip;
        this.#email = email;
        this.#password = password;
        this.#firstName = firstName;
        this.#lastName = lastName;
        this.#tier = tier;
        this.#balance=0;
    }
    -->
<div class="information-container">
    <div class="information-inputs" id="search-user">

    <h2>Search User</h2>
        <form>
            <input type="text" name="email" placeholder="Email" >
            <input type="text" name="UID" placeholder="UID">
            <input type="text" name="IP" placeholder="IP">
            <input type="text" name="firstName" placeholder="First Name">
            <input type="text" name="lastName" placeholder="Last Name">
            <input class="submit" id="submit-search-user" value="Search">
            <input type="reset">
        </form>
    </div>

    <div class="information-inputs" id="new-user">
        <h2>New User</h2>
        <form>
            <input type="text" name="email" placeholder="Email" required>
            <input type="text" name="password" placeholder="Password" required>
            <input type="text" name="fullname" placeholder="Full Name" required>
            <input class="submit" id="submit-new-user" value="Submit">
            <input type="reset">
        </form>
    </div>

    <div class="information-inputs" id="ban-user">
        <h2>Ban User</h2>
        <form action="admin.php" method="post">
            <input type="text" name="UID" placeholder="UID">
            <input type="submit" value="Submit">
            <input type="reset">
        </form>
    </div>

    <div class="information-inputs" id="unban-user">
        <h2>Unban User</h2>
        <form action="admin.php" method="post">
            <input type="text" name="UID" placeholder="UID">
            <input type="submit" value="Submit">
            <input type="reset">
        </form>
    </div>

    <div class="information-inputs" id="delete-user">
        <h2>Delete User</h2>
        <form action="admin.php" method="post">
            <input type="text" name="UID" placeholder="UID">
            <input type="submit" value="Submit">
            <input type="reset">
        </form>
    </div>
    <!--Make a toolbar with all the different admin tools-->


</body>


<script src="//cdnjs.cloudflare.com/ajax/libs/jquery/2.1.3/jquery.min.js"></script>

<script>


function commandLog(text){

    let commandLog = document.getElementById("command-log")
    let commandLogText = commandLog.value

    if(commandLogText==""){
        commandLog.value = text+"\n\n";
    }else{
        commandLog.value = commandLogText + text + "\n\n"
    }

}

function searchUser(email="",UID="",IP="",firstName="",lastName=""){
    //searches for a user based on the information given
    //returns a list of users
    //if no information is given, returns no parameters specified
    //if multiple users are found, returns all users
    //if no users are found, returns an empty list

    if(email=="" && UID=="" && IP=="" && firstName=="" && lastName==""){
        return "No parameters specified"
    }

    let users = []
    let user = {
        UID: "",
        email: "",
        firstName: "",
        lastName: "",
        IP: "",
        tier: "",
        balance: "",
        warnings: "",
        banned: ""
    }

    //make web request to search for user
    $.ajax({
        type: "GET",
        url: "searchUser",
        data: {
            email: email,
            UID: UID,
            IP: IP,
            firstName: firstName,
            lastName: lastName,
        },
        success: function(data){
            //parse data into user object
            //add user object to users list
            //return users list
        }
    })

}

$(function(){
    $("#submit-new-user").click(function(){
        let email = $("#new-user input[name='email']").val()
        let password = $("#new-user input[name='password']").val()
        let fullname = $("#new-user input[name='fullname']").val()
        $.ajax({
            type: "POST",
            url: "register",
            data: {
                email: email,
                password: password,
                fullname: fullname,
            },
            success: function(data){
                commandLog(JSON.stringify(data))
            }, error: function(data){
                commandLog(JSON.stringify(data))
            }
        })
    })
})

$(function(){
    $("#submit-search-user").click(function(){

        let email = $("#search-user input[name='email']").val()
        let UID = $("#search-user input[name='UID']").val()
        let IP = $("#search-user input[name='IP']").val()
        let firstName =  $("#search-user input[name='firstName']").val()
        let lastName = $("#search-user input[name='lastName']").val()

        console.log("email");
        console.log(email);
        console.log("UID");
        console.log(UID);
        console.log("IP");
        console.log(IP);
        console.log("firstName");
        console.log(firstName);
        console.log("lastName");
        console.log(lastName);


        $.ajax({
            type: "GET",
            url: "searchUser",
            data: {
                firstName: firstName,
                lastName: lastName,
                email: email,
                IP: IP,
                UID: UID
            },
            success: function(data){
                commandLog(JSON.stringify(data))
            }, error: function(data){
                commandLog(JSON.stringify(data))
            }
        })
    })
})




</script>



</html>

